---
# tasks file for tmux
- name: Install tmux
  package:
    name: tmux
    state: present

- name: Set tmux_version fact
  shell: tmux -V | cut -d' ' -f2
  register: tmux_version

- name: Copy tmux theme
  become: yes
  become_user: "{{ item.key }}"
  copy:
    src: "{{ role_path }}/templates/tmux.theme.j2"
    owner: "{{ item.key }}"
    dest: "~/.tmux.theme"
    mode: 0644
  with_dict: "{{ users }}"

- name: Copy tmux config
  become: yes
  become_user: "{{ item.key }}"
  template:
    src: "tmux.conf.j2"
    owner: "{{ item.key }}"
    dest: "~/.tmux.conf"
    mode: 0644
  with_dict: "{{ users }}"
