---

- name: Install the sway window manager
  package:
    name:
      - gammastep
      - light
      - mako
      - polkit-gnome
      - sway
      - waybar
      - wl-clipboard
      - wofi
    state: present

- name: Create the sway configuration folder
  become: yes
  become_user: "{{ desktop_user.username }}"
  file:
    dest: "~/.config/sway"
    state: directory
    owner: "{{ desktop_user.username }}"

- name: Copy over the sway configuration
  become: yes
  become_user: "{{ desktop_user.username }}"
  template:
    src: "config"
    dest: "~/.config/sway/config"
    owner: "{{ desktop_user.username }}"
    mode: 0644

- name: Copy VRR script
  become: yes
  become_user: "{{ desktop_user.username }}"
  template:
    src: "vrr_fullscreen.sh"
    dest: "~/.local/bin/vrr_fullscreen.sh"
    owner: "{{ desktop_user.username }}"
    mode: 0755
